generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id String @id @default(uuid())

  email String @unique

  github            Boolean @default(false)
  githubId          String?
  githubUsername    String?
  githubAccessToken String?

  googleDrive                      Boolean   @default(false)
  googleDriveId                    String?
  googleDriveName                  String?
  googleDriveAccessToken           String?
  googleDriveAccessTokenExpiresAt  DateTime?
  googleDriveRefreshToken          String?
  googleDriveRefreshTokenExpiresAt DateTime?

  gmail                      Boolean   @default(false)
  gmailId                    String?
  gmailName                  String?
  gmailAccessToken           String?
  gmailAccessTokenExpiresAt  DateTime?
  gmailRefreshToken          String?
  gmailRefreshTokenExpiresAt DateTime?

  notion            Boolean @default(false)
  notionId          String?
  notionName        String?
  notionAccessToken String?

  sessions Session[]

  createdAt DateTime @default(now())
}

model Session {
  id String @id

  secretHash Bytes

  userId String

  user User @relation(fields: [userId], references: [id])

  createdAt      DateTime @default(now())
  lastVerifiedAt DateTime @default(now())
}
